<!DOCTYPE html>
<html>
<head>
    <title>JSPlots.jl</title>
    <meta charset="UTF-8">
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apache-arrow@14.0.1/Arrow.es2015.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        #controls {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 20px;
            padding: 10px;
            background-color: #f0f0f0;
            border-radius: 5px;
        }
        #$div_id {
            width: 100%;
            height: 600px;
        }
    </style>
    

    <!-- external libs -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.71/jquery.csv-0.71.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/pivot.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/pivot.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/d3_renderers.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/c3_renderers.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/export_renderers.min.js"></script>
</head>

<body>

<script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>

<script type="module">
// Import parquet-wasm for Parquet file support
import * as parquet from 'https://unpkg.com/parquet-wasm@0.6.1/esm/parquet_wasm.js';

// Initialize parquet-wasm
await parquet.default();

// Make parquet available globally for loadDataset
window.parquetWasm = parquet;
window.parquetReady = true;
console.log('Parquet-wasm library loaded successfully');
</script>

<script>
// Helper function to wait for parquet-wasm to be loaded
function waitForParquet() {
    return new Promise(function(resolve) {
        if (window.parquetReady) {
            resolve();
            return;
        }
        var checkInterval = setInterval(function() {
            if (window.parquetReady) {
                clearInterval(checkInterval);
                resolve();
            }
        }, 50);
    });
}

// Centralized data loading function
// This function parses data from embedded or external sources and returns a Promise
// Supports CSV (embedded/external), JSON (embedded/external), and Parquet (external) formats
// Usage: loadDataset('dataLabel').then(function(data) { /* use data */ });
function loadDataset(dataLabel) {
    return new Promise(function(resolve, reject) {
        var dataElement = document.getElementById(dataLabel);
        if (!dataElement) {
            reject(new Error('Data element not found: ' + dataLabel));
            return;
        }

        var format = dataElement.getAttribute('data-format') || 'csv_embedded';
        var dataSrc = dataElement.getAttribute('data-src');

        // Handle external JSON files
        if (format === 'json_external' && dataSrc) {
            fetch(dataSrc)
                .then(function(response) {
                    if (!response.ok) {
                        throw new Error('Failed to load ' + dataSrc + ': ' + response.statusText);
                    }
                    return response.json();
                })
                .then(function(data) {
                    resolve(data);
                })
                .catch(function(error) {
                    console.error('Error loading external JSON:', error);
                    reject(error);
                });
            return;
        }

        // Handle external Parquet files
        if (format === 'parquet' && dataSrc) {
            // Wait for parquet-wasm to be loaded first
            waitForParquet()
                .then(function() {
                    return fetch(dataSrc);
                })
                .then(function(response) {
                    if (!response.ok) {
                        throw new Error('Failed to load ' + dataSrc + ': ' + response.statusText);
                    }
                    return response.arrayBuffer();
                })
                .then(function(arrayBuffer) {
                    // Use parquet-wasm to read the file
                    var uint8Array = new Uint8Array(arrayBuffer);

                    // readParquet returns an Arrow Table
                    var wasmTable = window.parquetWasm.readParquet(uint8Array);

                    // Convert to Arrow IPC stream
                    var ipcStream = wasmTable.intoIPCStream();

                    // Use Apache Arrow JS to read the IPC stream
                    var arrowTable = window.Arrow.tableFromIPC(ipcStream);

                    // Convert Arrow Table to array of JavaScript objects
                    var data = [];
                    for (var i = 0; i < arrowTable.numRows; i++) {
                        var row = {};
                        arrowTable.schema.fields.forEach(function(field) {
                            var column = arrowTable.getChild(field.name);
                            var value = column.get(i);

                            // Convert BigInt to Number (Arrow returns BigInt for Int64)
                            if (typeof value === 'bigint') {
                                value = Number(value);
                            }

                            row[field.name] = value;
                        });
                        data.push(row);
                    }

                    resolve(data);
                })
                .catch(function(error) {
                    console.error('Error loading external Parquet:', error);
                    reject(error);
                });
            return;
        }

        // Handle external CSV files
        if (format === 'csv_external' && dataSrc) {
            fetch(dataSrc)
                .then(function(response) {
                    if (!response.ok) {
                        throw new Error('Failed to load ' + dataSrc + ': ' + response.statusText);
                    }
                    return response.text();
                })
                .then(function(csvText) {
                    Papa.parse(csvText, {
                        header: true,
                        dynamicTyping: true,
                        skipEmptyLines: true,
                        complete: function(results) {
                            // Check for fatal errors only (not warnings)
                            var fatalErrors = results.errors.filter(function(err) {
                                return err.type !== 'Delimiter';
                            });

                            if (fatalErrors.length > 0) {
                                console.error('CSV parsing errors:', fatalErrors);
                                reject(fatalErrors);
                            } else if (results.data && results.data.length > 0) {
                                resolve(results.data);
                            } else {
                                reject(new Error('No data parsed from CSV'));
                            }
                        },
                        error: function(error) {
                            console.error('CSV parsing error:', error);
                            reject(error);
                        }
                    });
                })
                .catch(function(error) {
                    console.error('Error loading external CSV:', error);
                    reject(error);
                });
            return;
        }

        // Handle embedded data
        var dataText = dataElement.textContent.trim();

        if (format === 'json_embedded') {
            // Parse JSON data
            try {
                var data = JSON.parse(dataText);
                resolve(data);
            } catch (error) {
                console.error('JSON parsing error:', error);
                reject(error);
            }
        } else if (format === 'csv_embedded') {
            // Parse CSV data using PapaParse
            Papa.parse(dataText, {
                header: true,
                dynamicTyping: true,
                skipEmptyLines: true,
                complete: function(results) {
                    // Check for fatal errors only (not warnings)
                    // PapaParse includes non-fatal warnings in errors array
                    var fatalErrors = results.errors.filter(function(err) {
                        // Filter out delimiter detection warnings - these aren't fatal
                        // (common for single-column CSVs)
                        return err.type !== 'Delimiter';
                    });

                    if (fatalErrors.length > 0) {
                        console.error('CSV parsing errors:', fatalErrors);
                        reject(fatalErrors);
                    } else if (results.data && results.data.length > 0) {
                        resolve(results.data);
                    } else {
                        reject(new Error('No data parsed from CSV'));
                    }
                },
                error: function(error) {
                    console.error('CSV parsing error:', error);
                    reject(error);
                }
            });
        } else {
            reject(new Error('Unsupported data format: ' + format));
        }
    });
}

$(function(){

    // Initialize density toggle state
    window.showDensity_simple_scatter = true;
    
    // Load and parse CSV data using centralized parser
    loadDataset('df1').then(function(data) {
        window.allData_simple_scatter = data;

        // Initialize sliders and button after data is loaded
        $(function() {
                // Density toggle button
                document.getElementById('simple_scatter_density_toggle').addEventListener('click', function() {
                    window.showDensity_simple_scatter = !window.showDensity_simple_scatter;
                    this.textContent = window.showDensity_simple_scatter ? 'Hide Density Contours' : 'Show Density Contours';
                    updatePlotWithFilters_simple_scatter();
                });
                
                    $("#simple_scatter_value_slider").slider({
        range: true,
        min: 0.1480958461437254,
        max: 99.95900779858347,
        step: 0.09981091195243974,
        values: [0.1480958461437254, 99.95900779858347],
        slide: function(event, ui) {
            $("#simple_scatter_value_slider_label").text(ui.values[0].toFixed(2) + " to " + ui.values[1].toFixed(2));
        },
        change: function(event, ui) {
            updatePlotWithFilters_simple_scatter();
        }
    });

                
            // Initial plot
            updatePlotWithFilters_simple_scatter();
        });
    }).catch(function(error) {
        console.error('Error loading data for chart simple_scatter:', error);
    });
    
    function updatePlot_simple_scatter(data) {
        var traces = [];
        
        traces.push({
    x: data.map(d => d.x),
    y: data.map(d => d.y),
    mode: 'markers',
    name: 'points',
    marker: {
        size: 4,
        opacity: 0.6,
        color: 'rgb(31, 119, 180)'
    },
    type: 'scatter'
});

// Density contours
if (window.showDensity_simple_scatter) {
    traces.push({
        x: data.map(d => d.x),
        y: data.map(d => d.y),
        name: 'density',
        ncontours: 20,
        colorscale: 'Hot',
        reversescale: true,
        showscale: false,
        type: 'histogram2dcontour',
        showlegend: false
    });
}

// X marginal histogram
traces.push({
    x: data.map(d => d.x),
    name: 'x density',
    marker: {color: 'rgba(128, 128, 128, 0.5)'},
    yaxis: 'y2',
    type: 'histogram',
    showlegend: false
});

// Y marginal histogram
traces.push({
    y: data.map(d => d.y),
    name: 'y density',
    marker: {color: 'rgba(128, 128, 128, 0.5)'},
    xaxis: 'x2',
    type: 'histogram',
    showlegend: false
});

        
        var layout = {
            title: 'Simple Scatter with Continuous Range Slider',
            showlegend: false,
            autosize: true,
            hovermode: 'closest',
                xaxis: {
        title: 'X Variable',
        domain: [0, 0.85],
        showgrid: true,
        zeroline: true
    },
    yaxis: {
        title: 'Y Variable',
        domain: [0, 0.85],
        showgrid: true,
        zeroline: true
    },
    xaxis2: {
        domain: [0.85, 1],
        showgrid: false,
        zeroline: false
    },
    yaxis2: {
        domain: [0.85, 1],
        showgrid: false,
        zeroline: false
    },

            margin: {t: 100, r: 100, b: 100, l: 100}
        };
        
        Plotly.newPlot('simple_scatter', traces, layout, {responsive: true});
    }
    
        function updatePlotWithFilters_simple_scatter() {
        var filteredData = window.allData_simple_scatter.filter(function(row) {
                // Filter for value (continuous)
    if ($("#simple_scatter_value_slider").data('ui-slider')) {
        var value_values = $("#simple_scatter_value_slider").slider("values");
        var value_val = parseFloat(row.value);
        if (value_val < value_values[0] || value_val > value_values[1]) {
            return false;
        }
    }

            return true;
        });
        updatePlot_simple_scatter(filteredData);
    }

    // Initialize density toggle state
    window.showDensity_multi_slider = true;
    
    // Load and parse CSV data using centralized parser
    loadDataset('df2').then(function(data) {
        window.allData_multi_slider = data;

        // Initialize sliders and button after data is loaded
        $(function() {
                // Density toggle button
                document.getElementById('multi_slider_density_toggle').addEventListener('click', function() {
                    window.showDensity_multi_slider = !window.showDensity_multi_slider;
                    this.textContent = window.showDensity_multi_slider ? 'Hide Density Contours' : 'Show Density Contours';
                    updatePlotWithFilters_multi_slider();
                });
                
                    document.getElementById('multi_slider_category_slider').addEventListener('change', function() {
        updatePlotWithFilters_multi_slider();
    });
    $("#multi_slider_score_slider").slider({
        range: true,
        min: 0.4697996493946588,
        max: 49.88678962370269,
        step: 0.04941698997430803,
        values: [0.4697996493946588, 49.88678962370269],
        slide: function(event, ui) {
            $("#multi_slider_score_slider_label").text(ui.values[0].toFixed(2) + " to " + ui.values[1].toFixed(2));
        },
        change: function(event, ui) {
            updatePlotWithFilters_multi_slider();
        }
    });

                
            // Initial plot
            updatePlotWithFilters_multi_slider();
        });
    }).catch(function(error) {
        console.error('Error loading data for chart multi_slider:', error);
    });
    
    function updatePlot_multi_slider(data) {
        var traces = [];
        
        // Group data by color column
var groups = {};
data.forEach(function(row) {
    var key = row.group;
    if (!groups[key]) groups[key] = [];
    groups[key].push(row);
});

// Create a trace for each group
Object.keys(groups).forEach(function(key) {
    var groupData = groups[key];
    traces.push({
        x: groupData.map(d => d.x),
        y: groupData.map(d => d.y),
        mode: 'markers',
        name: key,
        marker: {
            size: 4,
            opacity: 0.6
        },
        type: 'scatter'
    });
});

// Density contours
if (window.showDensity_multi_slider) {
    traces.push({
        x: data.map(d => d.x),
        y: data.map(d => d.y),
        name: 'density',
        ncontours: 20,
        colorscale: 'Hot',
        reversescale: true,
        showscale: false,
        type: 'histogram2dcontour',
        showlegend: false
    });
}

// X marginal histogram
traces.push({
    x: data.map(d => d.x),
    name: 'x density',
    marker: {color: 'rgba(128, 128, 128, 0.5)'},
    yaxis: 'y2',
    type: 'histogram',
    showlegend: false
});

// Y marginal histogram
traces.push({
    y: data.map(d => d.y),
    name: 'y density',
    marker: {color: 'rgba(128, 128, 128, 0.5)'},
    xaxis: 'x2',
    type: 'histogram',
    showlegend: false
});

        
        var layout = {
            title: 'Scatter with Multiple Filters',
            showlegend: true,
            autosize: true,
            hovermode: 'closest',
                xaxis: {
        title: 'X Variable',
        domain: [0, 0.85],
        showgrid: true,
        zeroline: true
    },
    yaxis: {
        title: 'Y Variable',
        domain: [0, 0.85],
        showgrid: true,
        zeroline: true
    },
    xaxis2: {
        domain: [0.85, 1],
        showgrid: false,
        zeroline: false
    },
    yaxis2: {
        domain: [0.85, 1],
        showgrid: false,
        zeroline: false
    },

            margin: {t: 100, r: 100, b: 100, l: 100}
        };
        
        Plotly.newPlot('multi_slider', traces, layout, {responsive: true});
    }
    
        function updatePlotWithFilters_multi_slider() {
        var filteredData = window.allData_multi_slider.filter(function(row) {
                // Filter for category (categorical)
    var category_select = document.getElementById('multi_slider_category_slider');
    var category_selected = Array.from(category_select.selectedOptions).map(opt => opt.value);
    if (category_selected.length > 0 && !category_selected.includes(String(row.category))) {
        return false;
    }

                            // Filter for score (continuous)
    if ($("#multi_slider_score_slider").data('ui-slider')) {
        var score_values = $("#multi_slider_score_slider").slider("values");
        var score_val = parseFloat(row.score);
        if (score_val < score_values[0] || score_val > score_values[1]) {
            return false;
        }
    }

            return true;
        });
        updatePlot_multi_slider(filteredData);
    }

    // Initialize density toggle state
    window.showDensity_weather_scatter = true;
    
    // Load and parse CSV data using centralized parser
    loadDataset('df3').then(function(data) {
        window.allData_weather_scatter = data;

        // Initialize sliders and button after data is loaded
        $(function() {
                // Density toggle button
                document.getElementById('weather_scatter_density_toggle').addEventListener('click', function() {
                    window.showDensity_weather_scatter = !window.showDensity_weather_scatter;
                    this.textContent = window.showDensity_weather_scatter ? 'Hide Density Contours' : 'Show Density Contours';
                    updatePlotWithFilters_weather_scatter();
                });
                
                    window.dateValues_weather_scatter_date_slider = ["2023-01-01","2023-01-02","2023-01-03","2023-01-04","2023-01-05","2023-01-06","2023-01-07","2023-01-08","2023-01-09","2023-01-10","2023-01-11","2023-01-12","2023-01-13","2023-01-14","2023-01-15","2023-01-16","2023-01-17","2023-01-18","2023-01-19","2023-01-20","2023-01-21","2023-01-22","2023-01-23","2023-01-24","2023-01-25","2023-01-26","2023-01-27","2023-01-28","2023-01-29","2023-01-30","2023-01-31","2023-02-01","2023-02-02","2023-02-03","2023-02-04","2023-02-05","2023-02-06","2023-02-07","2023-02-08","2023-02-09","2023-02-10","2023-02-11","2023-02-12","2023-02-13","2023-02-14","2023-02-15","2023-02-16","2023-02-17","2023-02-18","2023-02-19","2023-02-20","2023-02-21","2023-02-22","2023-02-23","2023-02-24","2023-02-25","2023-02-26","2023-02-27","2023-02-28","2023-03-01","2023-03-02","2023-03-03","2023-03-04","2023-03-05","2023-03-06","2023-03-07","2023-03-08","2023-03-09","2023-03-10","2023-03-11","2023-03-12","2023-03-13","2023-03-14","2023-03-15","2023-03-16","2023-03-17","2023-03-18","2023-03-19","2023-03-20","2023-03-21","2023-03-22","2023-03-23","2023-03-24","2023-03-25","2023-03-26","2023-03-27","2023-03-28","2023-03-29","2023-03-30","2023-03-31","2023-04-01","2023-04-02","2023-04-03","2023-04-04","2023-04-05","2023-04-06","2023-04-07","2023-04-08","2023-04-09","2023-04-10","2023-04-11","2023-04-12","2023-04-13","2023-04-14","2023-04-15","2023-04-16","2023-04-17","2023-04-18","2023-04-19","2023-04-20","2023-04-21","2023-04-22","2023-04-23","2023-04-24","2023-04-25","2023-04-26","2023-04-27","2023-04-28","2023-04-29","2023-04-30","2023-05-01","2023-05-02","2023-05-03","2023-05-04","2023-05-05","2023-05-06","2023-05-07","2023-05-08","2023-05-09","2023-05-10","2023-05-11","2023-05-12","2023-05-13","2023-05-14","2023-05-15","2023-05-16","2023-05-17","2023-05-18","2023-05-19","2023-05-20","2023-05-21","2023-05-22","2023-05-23","2023-05-24","2023-05-25","2023-05-26","2023-05-27","2023-05-28","2023-05-29","2023-05-30","2023-05-31","2023-06-01","2023-06-02","2023-06-03","2023-06-04","2023-06-05","2023-06-06","2023-06-07","2023-06-08","2023-06-09","2023-06-10","2023-06-11","2023-06-12","2023-06-13","2023-06-14","2023-06-15","2023-06-16","2023-06-17","2023-06-18","2023-06-19","2023-06-20","2023-06-21","2023-06-22","2023-06-23","2023-06-24","2023-06-25","2023-06-26","2023-06-27","2023-06-28","2023-06-29","2023-06-30","2023-07-01","2023-07-02","2023-07-03","2023-07-04","2023-07-05","2023-07-06","2023-07-07","2023-07-08","2023-07-09","2023-07-10","2023-07-11","2023-07-12","2023-07-13","2023-07-14","2023-07-15","2023-07-16","2023-07-17","2023-07-18","2023-07-19","2023-07-20","2023-07-21","2023-07-22","2023-07-23","2023-07-24","2023-07-25","2023-07-26","2023-07-27","2023-07-28","2023-07-29","2023-07-30","2023-07-31","2023-08-01","2023-08-02","2023-08-03","2023-08-04","2023-08-05","2023-08-06","2023-08-07","2023-08-08","2023-08-09","2023-08-10","2023-08-11","2023-08-12","2023-08-13","2023-08-14","2023-08-15","2023-08-16","2023-08-17","2023-08-18","2023-08-19","2023-08-20","2023-08-21","2023-08-22","2023-08-23","2023-08-24","2023-08-25","2023-08-26","2023-08-27","2023-08-28","2023-08-29","2023-08-30","2023-08-31","2023-09-01","2023-09-02","2023-09-03","2023-09-04","2023-09-05","2023-09-06","2023-09-07","2023-09-08","2023-09-09","2023-09-10","2023-09-11","2023-09-12","2023-09-13","2023-09-14","2023-09-15","2023-09-16","2023-09-17","2023-09-18","2023-09-19","2023-09-20","2023-09-21","2023-09-22","2023-09-23","2023-09-24","2023-09-25","2023-09-26","2023-09-27","2023-09-28","2023-09-29","2023-09-30","2023-10-01","2023-10-02","2023-10-03","2023-10-04","2023-10-05","2023-10-06","2023-10-07","2023-10-08","2023-10-09","2023-10-10","2023-10-11","2023-10-12","2023-10-13","2023-10-14","2023-10-15","2023-10-16","2023-10-17","2023-10-18","2023-10-19","2023-10-20","2023-10-21","2023-10-22","2023-10-23","2023-10-24","2023-10-25","2023-10-26","2023-10-27","2023-10-28","2023-10-29","2023-10-30","2023-10-31","2023-11-01","2023-11-02","2023-11-03","2023-11-04","2023-11-05","2023-11-06","2023-11-07","2023-11-08","2023-11-09","2023-11-10","2023-11-11","2023-11-12","2023-11-13","2023-11-14","2023-11-15","2023-11-16","2023-11-17","2023-11-18","2023-11-19","2023-11-20","2023-11-21","2023-11-22","2023-11-23","2023-11-24","2023-11-25","2023-11-26","2023-11-27","2023-11-28","2023-11-29","2023-11-30","2023-12-01","2023-12-02","2023-12-03","2023-12-04","2023-12-05","2023-12-06","2023-12-07","2023-12-08","2023-12-09","2023-12-10","2023-12-11","2023-12-12","2023-12-13","2023-12-14","2023-12-15","2023-12-16","2023-12-17","2023-12-18","2023-12-19","2023-12-20","2023-12-21","2023-12-22","2023-12-23","2023-12-24","2023-12-25","2023-12-26","2023-12-27","2023-12-28","2023-12-29","2023-12-30","2023-12-31"];
    $("#weather_scatter_date_slider").slider({
        range: true,
        min: 0,
        max: 364,
        step: 1,
        values: [0, 364],
        slide: function(event, ui) {
            $("#weather_scatter_date_slider_label").text(window.dateValues_weather_scatter_date_slider[ui.values[0]] + " to " + window.dateValues_weather_scatter_date_slider[ui.values[1]]);
        },
        change: function(event, ui) {
            updatePlotWithFilters_weather_scatter();
        }
    });
    document.getElementById('weather_scatter_season_slider').addEventListener('change', function() {
        updatePlotWithFilters_weather_scatter();
    });
    $("#weather_scatter_temperature_slider").slider({
        range: true,
        min: 1.2610879562554578,
        max: 29.55391299263034,
        step: 0.028292825036374883,
        values: [1.2610879562554578, 29.55391299263034],
        slide: function(event, ui) {
            $("#weather_scatter_temperature_slider_label").text(ui.values[0].toFixed(2) + " to " + ui.values[1].toFixed(2));
        },
        change: function(event, ui) {
            updatePlotWithFilters_weather_scatter();
        }
    });

                
            // Initial plot
            updatePlotWithFilters_weather_scatter();
        });
    }).catch(function(error) {
        console.error('Error loading data for chart weather_scatter:', error);
    });
    
    function updatePlot_weather_scatter(data) {
        var traces = [];
        
        // Group data by color column
var groups = {};
data.forEach(function(row) {
    var key = row.season;
    if (!groups[key]) groups[key] = [];
    groups[key].push(row);
});

// Create a trace for each group
Object.keys(groups).forEach(function(key) {
    var groupData = groups[key];
    traces.push({
        x: groupData.map(d => d.temperature),
        y: groupData.map(d => d.rainfall),
        mode: 'markers',
        name: key,
        marker: {
            size: 4,
            opacity: 0.6
        },
        type: 'scatter'
    });
});

// Density contours
if (window.showDensity_weather_scatter) {
    traces.push({
        x: data.map(d => d.temperature),
        y: data.map(d => d.rainfall),
        name: 'density',
        ncontours: 20,
        colorscale: 'Hot',
        reversescale: true,
        showscale: false,
        type: 'histogram2dcontour',
        showlegend: false
    });
}

// X marginal histogram
traces.push({
    x: data.map(d => d.temperature),
    name: 'x density',
    marker: {color: 'rgba(128, 128, 128, 0.5)'},
    yaxis: 'y2',
    type: 'histogram',
    showlegend: false
});

// Y marginal histogram
traces.push({
    y: data.map(d => d.rainfall),
    name: 'y density',
    marker: {color: 'rgba(128, 128, 128, 0.5)'},
    xaxis: 'x2',
    type: 'histogram',
    showlegend: false
});

        
        var layout = {
            title: 'Weather Data with Multiple Range Sliders',
            showlegend: true,
            autosize: true,
            hovermode: 'closest',
                xaxis: {
        title: 'Temperature (Â°C)',
        domain: [0, 0.85],
        showgrid: true,
        zeroline: true
    },
    yaxis: {
        title: 'Rainfall (mm)',
        domain: [0, 0.85],
        showgrid: true,
        zeroline: true
    },
    xaxis2: {
        domain: [0.85, 1],
        showgrid: false,
        zeroline: false
    },
    yaxis2: {
        domain: [0.85, 1],
        showgrid: false,
        zeroline: false
    },

            margin: {t: 100, r: 100, b: 100, l: 100}
        };
        
        Plotly.newPlot('weather_scatter', traces, layout, {responsive: true});
    }
    
        function updatePlotWithFilters_weather_scatter() {
        var filteredData = window.allData_weather_scatter.filter(function(row) {
                // Filter for date (date)
    if ($("#weather_scatter_date_slider").data('ui-slider')) {
        var date_values = $("#weather_scatter_date_slider").slider("values");
        var date_minDate = window.dateValues_weather_scatter_date_slider[date_values[0]];
        var date_maxDate = window.dateValues_weather_scatter_date_slider[date_values[1]];
        var date_rowDate = row.date;
        if (date_rowDate < date_minDate || date_rowDate > date_maxDate) {
            return false;
        }
    }

                            // Filter for season (categorical)
    var season_select = document.getElementById('weather_scatter_season_slider');
    var season_selected = Array.from(season_select.selectedOptions).map(opt => opt.value);
    if (season_selected.length > 0 && !season_selected.includes(String(row.season))) {
        return false;
    }

                            // Filter for temperature (continuous)
    if ($("#weather_scatter_temperature_slider").data('ui-slider')) {
        var temperature_values = $("#weather_scatter_temperature_slider").slider("values");
        var temperature_val = parseFloat(row.temperature);
        if (temperature_val < temperature_values[0] || temperature_val > temperature_values[1]) {
            return false;
        }
    }

            return true;
        });
        updatePlot_weather_scatter(filteredData);
    }

    // Initialize density toggle state
    window.showDensity_no_sliders = true;
    
    // Load and parse CSV data using centralized parser
    loadDataset('df4').then(function(data) {
        window.allData_no_sliders = data;

        // Initialize sliders and button after data is loaded
        $(function() {
                // Density toggle button
                document.getElementById('no_sliders_density_toggle').addEventListener('click', function() {
                    window.showDensity_no_sliders = !window.showDensity_no_sliders;
                    this.textContent = window.showDensity_no_sliders ? 'Hide Density Contours' : 'Show Density Contours';
                    updatePlotWithFilters_no_sliders();
                });
                
                
                
            // Initial plot
            updatePlotWithFilters_no_sliders();
        });
    }).catch(function(error) {
        console.error('Error loading data for chart no_sliders:', error);
    });
    
    function updatePlot_no_sliders(data) {
        var traces = [];
        
        traces.push({
    x: data.map(d => d.x),
    y: data.map(d => d.y),
    mode: 'markers',
    name: 'points',
    marker: {
        size: 3,
        opacity: 0.4,
        color: 'rgb(31, 119, 180)'
    },
    type: 'scatter'
});

// Density contours
if (window.showDensity_no_sliders) {
    traces.push({
        x: data.map(d => d.x),
        y: data.map(d => d.y),
        name: 'density',
        ncontours: 20,
        colorscale: 'Hot',
        reversescale: true,
        showscale: false,
        type: 'histogram2dcontour',
        showlegend: false
    });
}

        
        var layout = {
            title: 'Simple Scatter (No Filters)',
            showlegend: false,
            autosize: true,
            hovermode: 'closest',
                xaxis: {
        title: 'X Coordinate',
        showgrid: true,
        zeroline: true
    },
    yaxis: {
        title: 'Y Coordinate',
        showgrid: true,
        zeroline: true
    },

            margin: {t: 100, r: 100, b: 100, l: 100}
        };
        
        Plotly.newPlot('no_sliders', traces, layout, {responsive: true});
    }
    
        function updatePlotWithFilters_no_sliders() {
        updatePlot_no_sliders(window.allData_no_sliders);
    }

    // Initialize density toggle state
    window.showDensity_stock_scatter = true;
    
    // Load and parse CSV data using centralized parser
    loadDataset('stock_data').then(function(data) {
        window.allData_stock_scatter = data;

        // Initialize sliders and button after data is loaded
        $(function() {
                // Density toggle button
                document.getElementById('stock_scatter_density_toggle').addEventListener('click', function() {
                    window.showDensity_stock_scatter = !window.showDensity_stock_scatter;
                    this.textContent = window.showDensity_stock_scatter ? 'Hide Density Contours' : 'Show Density Contours';
                    updatePlotWithFilters_stock_scatter();
                });
                
                    window.dateValues_stock_scatter_date_slider = ["2024-01-01","2024-01-02","2024-01-03","2024-01-04","2024-01-05","2024-01-06","2024-01-07","2024-01-08","2024-01-09","2024-01-10","2024-01-11","2024-01-12","2024-01-13","2024-01-14","2024-01-15","2024-01-16","2024-01-17","2024-01-18","2024-01-19","2024-01-20","2024-01-21","2024-01-22","2024-01-23","2024-01-24","2024-01-25","2024-01-26","2024-01-27","2024-01-28","2024-01-29","2024-01-30","2024-01-31","2024-02-01","2024-02-02","2024-02-03","2024-02-04","2024-02-05","2024-02-06","2024-02-07","2024-02-08","2024-02-09","2024-02-10","2024-02-11","2024-02-12","2024-02-13","2024-02-14","2024-02-15","2024-02-16","2024-02-17","2024-02-18","2024-02-19","2024-02-20","2024-02-21","2024-02-22","2024-02-23","2024-02-24","2024-02-25","2024-02-26","2024-02-27","2024-02-28","2024-02-29","2024-03-01","2024-03-02","2024-03-03","2024-03-04","2024-03-05","2024-03-06","2024-03-07","2024-03-08","2024-03-09","2024-03-10","2024-03-11","2024-03-12","2024-03-13","2024-03-14","2024-03-15","2024-03-16","2024-03-17","2024-03-18","2024-03-19","2024-03-20","2024-03-21","2024-03-22","2024-03-23","2024-03-24","2024-03-25","2024-03-26","2024-03-27","2024-03-28","2024-03-29","2024-03-30","2024-03-31"];
    $("#stock_scatter_date_slider").slider({
        range: true,
        min: 0,
        max: 90,
        step: 1,
        values: [0, 90],
        slide: function(event, ui) {
            $("#stock_scatter_date_slider_label").text(window.dateValues_stock_scatter_date_slider[ui.values[0]] + " to " + window.dateValues_stock_scatter_date_slider[ui.values[1]]);
        },
        change: function(event, ui) {
            updatePlotWithFilters_stock_scatter();
        }
    });
    document.getElementById('stock_scatter_symbol_slider').addEventListener('change', function() {
        updatePlotWithFilters_stock_scatter();
    });
    $("#stock_scatter_volume_slider").slider({
        range: true,
        min: 7111.172413433953,
        max: 995168.5243047017,
        step: 988.0573518912678,
        values: [7111.172413433953, 995168.5243047017],
        slide: function(event, ui) {
            $("#stock_scatter_volume_slider_label").text(ui.values[0].toFixed(2) + " to " + ui.values[1].toFixed(2));
        },
        change: function(event, ui) {
            updatePlotWithFilters_stock_scatter();
        }
    });

                
            // Initial plot
            updatePlotWithFilters_stock_scatter();
        });
    }).catch(function(error) {
        console.error('Error loading data for chart stock_scatter:', error);
    });
    
    function updatePlot_stock_scatter(data) {
        var traces = [];
        
        // Group data by color column
var groups = {};
data.forEach(function(row) {
    var key = row.symbol;
    if (!groups[key]) groups[key] = [];
    groups[key].push(row);
});

// Create a trace for each group
Object.keys(groups).forEach(function(key) {
    var groupData = groups[key];
    traces.push({
        x: groupData.map(d => d.volume),
        y: groupData.map(d => d.return_pct),
        mode: 'markers',
        name: key,
        marker: {
            size: 4,
            opacity: 0.6
        },
        type: 'scatter'
    });
});

// Density contours
if (window.showDensity_stock_scatter) {
    traces.push({
        x: data.map(d => d.volume),
        y: data.map(d => d.return_pct),
        name: 'density',
        ncontours: 20,
        colorscale: 'Hot',
        reversescale: true,
        showscale: false,
        type: 'histogram2dcontour',
        showlegend: false
    });
}

// X marginal histogram
traces.push({
    x: data.map(d => d.volume),
    name: 'x density',
    marker: {color: 'rgba(128, 128, 128, 0.5)'},
    yaxis: 'y2',
    type: 'histogram',
    showlegend: false
});

// Y marginal histogram
traces.push({
    y: data.map(d => d.return_pct),
    name: 'y density',
    marker: {color: 'rgba(128, 128, 128, 0.5)'},
    xaxis: 'x2',
    type: 'histogram',
    showlegend: false
});

        
        var layout = {
            title: 'Stock Returns vs Volume with Multiple Filters',
            showlegend: true,
            autosize: true,
            hovermode: 'closest',
                xaxis: {
        title: 'Trading Volume',
        domain: [0, 0.85],
        showgrid: true,
        zeroline: true
    },
    yaxis: {
        title: 'Daily Return (%)',
        domain: [0, 0.85],
        showgrid: true,
        zeroline: true
    },
    xaxis2: {
        domain: [0.85, 1],
        showgrid: false,
        zeroline: false
    },
    yaxis2: {
        domain: [0.85, 1],
        showgrid: false,
        zeroline: false
    },

            margin: {t: 100, r: 100, b: 100, l: 100}
        };
        
        Plotly.newPlot('stock_scatter', traces, layout, {responsive: true});
    }
    
        function updatePlotWithFilters_stock_scatter() {
        var filteredData = window.allData_stock_scatter.filter(function(row) {
                // Filter for date (date)
    if ($("#stock_scatter_date_slider").data('ui-slider')) {
        var date_values = $("#stock_scatter_date_slider").slider("values");
        var date_minDate = window.dateValues_stock_scatter_date_slider[date_values[0]];
        var date_maxDate = window.dateValues_stock_scatter_date_slider[date_values[1]];
        var date_rowDate = row.date;
        if (date_rowDate < date_minDate || date_rowDate > date_maxDate) {
            return false;
        }
    }

                            // Filter for symbol (categorical)
    var symbol_select = document.getElementById('stock_scatter_symbol_slider');
    var symbol_selected = Array.from(symbol_select.selectedOptions).map(opt => opt.value);
    if (symbol_selected.length > 0 && !symbol_selected.includes(String(row.symbol))) {
        return false;
    }

                            // Filter for volume (continuous)
    if ($("#stock_scatter_volume_slider").data('ui-slider')) {
        var volume_values = $("#stock_scatter_volume_slider").slider("values");
        var volume_val = parseFloat(row.volume);
        if (volume_val < volume_values[0] || volume_val > volume_values[1]) {
            return false;
        }
    }

            return true;
        });
        updatePlot_stock_scatter(filteredData);
    }

    // Initialize density toggle state
    window.showDensity_complex_filters = true;
    
    // Load and parse CSV data using centralized parser
    loadDataset('df6').then(function(data) {
        window.allData_complex_filters = data;

        // Initialize sliders and button after data is loaded
        $(function() {
                // Density toggle button
                document.getElementById('complex_filters_density_toggle').addEventListener('click', function() {
                    window.showDensity_complex_filters = !window.showDensity_complex_filters;
                    this.textContent = window.showDensity_complex_filters ? 'Hide Density Contours' : 'Show Density Contours';
                    updatePlotWithFilters_complex_filters();
                });
                
                    document.getElementById('complex_filters_region_slider').addEventListener('change', function() {
        updatePlotWithFilters_complex_filters();
    });
    document.getElementById('complex_filters_priority_slider').addEventListener('change', function() {
        updatePlotWithFilters_complex_filters();
    });
    window.dateValues_complex_filters_timestamp_slider = ["2024-01-01","2024-01-02","2024-01-03","2024-01-04","2024-01-05","2024-01-06","2024-01-07","2024-01-08","2024-01-09","2024-01-10","2024-01-12","2024-01-13","2024-01-14","2024-01-15","2024-01-16","2024-01-17","2024-01-18","2024-01-19","2024-01-22","2024-01-23","2024-01-24","2024-01-25","2024-01-26","2024-01-27","2024-01-28","2024-01-29","2024-01-30","2024-01-31","2024-02-02","2024-02-03","2024-02-04","2024-02-05","2024-02-07","2024-02-08","2024-02-09","2024-02-10","2024-02-11","2024-02-13","2024-02-14","2024-02-15","2024-02-16","2024-02-17","2024-02-18","2024-02-19","2024-02-20","2024-02-21","2024-02-22","2024-02-23","2024-02-24","2024-02-25","2024-02-26","2024-02-27","2024-02-28","2024-02-29","2024-03-01","2024-03-02","2024-03-03","2024-03-04","2024-03-05","2024-03-06","2024-03-07","2024-03-08","2024-03-09","2024-03-10","2024-03-11","2024-03-13","2024-03-14","2024-03-15","2024-03-16","2024-03-17","2024-03-18","2024-03-19","2024-03-20","2024-03-21","2024-03-22","2024-03-24","2024-03-25","2024-03-26","2024-03-27","2024-03-28","2024-03-29","2024-03-30","2024-03-31","2024-04-02","2024-04-03","2024-04-04","2024-04-05","2024-04-06","2024-04-07","2024-04-08","2024-04-09","2024-04-10","2024-04-11","2024-04-12","2024-04-14","2024-04-16","2024-04-17","2024-04-18","2024-04-19","2024-04-20","2024-04-21","2024-04-22","2024-04-23","2024-04-24","2024-04-25","2024-04-26","2024-04-27","2024-04-28","2024-04-29","2024-04-30","2024-05-01","2024-05-02","2024-05-03","2024-05-04","2024-05-05","2024-05-06","2024-05-08","2024-05-09","2024-05-10","2024-05-11","2024-05-12","2024-05-13","2024-05-14","2024-05-16","2024-05-17","2024-05-18","2024-05-19","2024-05-20","2024-05-21","2024-05-24","2024-05-25","2024-05-26","2024-05-27","2024-05-28","2024-05-29","2024-05-30","2024-05-31","2024-06-01","2024-06-02","2024-06-03","2024-06-04","2024-06-05","2024-06-06","2024-06-07","2024-06-08","2024-06-09","2024-06-10","2024-06-12","2024-06-13","2024-06-14","2024-06-15","2024-06-16","2024-06-17","2024-06-18","2024-06-19","2024-06-20","2024-06-21","2024-06-22","2024-06-23","2024-06-24","2024-06-25","2024-06-26","2024-06-27","2024-06-29","2024-06-30","2024-07-01","2024-07-02","2024-07-04","2024-07-05","2024-07-06","2024-07-07","2024-07-08","2024-07-11","2024-07-12","2024-07-13","2024-07-14","2024-07-15","2024-07-16","2024-07-18","2024-07-19","2024-07-20","2024-07-21","2024-07-22","2024-07-23","2024-07-24","2024-07-25","2024-07-26","2024-07-27","2024-07-28","2024-07-29","2024-07-30","2024-08-01","2024-08-03","2024-08-04","2024-08-05","2024-08-06","2024-08-07","2024-08-08","2024-08-09","2024-08-10","2024-08-11","2024-08-12","2024-08-13","2024-08-14","2024-08-15","2024-08-16","2024-08-17","2024-08-18","2024-08-19","2024-08-20","2024-08-21","2024-08-22","2024-08-23","2024-08-24","2024-08-25","2024-08-26","2024-08-27","2024-08-28","2024-08-29","2024-08-30","2024-08-31","2024-09-01","2024-09-02","2024-09-03","2024-09-04","2024-09-05","2024-09-06","2024-09-07","2024-09-08","2024-09-09","2024-09-10","2024-09-11","2024-09-12","2024-09-13","2024-09-14","2024-09-15","2024-09-16","2024-09-17","2024-09-18","2024-09-19","2024-09-20","2024-09-21","2024-09-22","2024-09-23","2024-09-24","2024-09-25","2024-09-26","2024-09-27","2024-09-28","2024-09-29","2024-09-30","2024-10-01","2024-10-02","2024-10-04","2024-10-05","2024-10-06","2024-10-07","2024-10-08","2024-10-10","2024-10-11","2024-10-12","2024-10-13","2024-10-14","2024-10-15","2024-10-16","2024-10-17","2024-10-18","2024-10-19","2024-10-20","2024-10-21","2024-10-22","2024-10-23","2024-10-24","2024-10-25","2024-10-26","2024-10-27","2024-10-28","2024-10-29","2024-10-31","2024-11-01","2024-11-02","2024-11-03","2024-11-04","2024-11-06","2024-11-07","2024-11-08","2024-11-09","2024-11-10","2024-11-11","2024-11-12","2024-11-13","2024-11-14","2024-11-15","2024-11-16","2024-11-17","2024-11-18","2024-11-19","2024-11-21","2024-11-22","2024-11-23","2024-11-24","2024-11-25","2024-11-26","2024-11-27","2024-11-28","2024-11-29","2024-11-30","2024-12-01","2024-12-02","2024-12-04","2024-12-05","2024-12-06","2024-12-07","2024-12-08","2024-12-09","2024-12-10","2024-12-11","2024-12-12","2024-12-13","2024-12-14","2024-12-15","2024-12-16","2024-12-17","2024-12-18","2024-12-19","2024-12-20","2024-12-21","2024-12-22","2024-12-23","2024-12-24","2024-12-25","2024-12-26","2024-12-27","2024-12-28","2024-12-29","2024-12-30","2024-12-31"];
    $("#complex_filters_timestamp_slider").slider({
        range: true,
        min: 0,
        max: 336,
        step: 1,
        values: [0, 336],
        slide: function(event, ui) {
            $("#complex_filters_timestamp_slider_label").text(window.dateValues_complex_filters_timestamp_slider[ui.values[0]] + " to " + window.dateValues_complex_filters_timestamp_slider[ui.values[1]]);
        },
        change: function(event, ui) {
            updatePlotWithFilters_complex_filters();
        }
    });
    $("#complex_filters_value_slider").slider({
        range: true,
        min: 1.4760134931738333,
        max: 999.6882892037211,
        step: 0.9982122757105473,
        values: [1.4760134931738333, 999.6882892037211],
        slide: function(event, ui) {
            $("#complex_filters_value_slider_label").text(ui.values[0].toFixed(2) + " to " + ui.values[1].toFixed(2));
        },
        change: function(event, ui) {
            updatePlotWithFilters_complex_filters();
        }
    });

                
            // Initial plot
            updatePlotWithFilters_complex_filters();
        });
    }).catch(function(error) {
        console.error('Error loading data for chart complex_filters:', error);
    });
    
    function updatePlot_complex_filters(data) {
        var traces = [];
        
        // Group data by color column
var groups = {};
data.forEach(function(row) {
    var key = row.priority;
    if (!groups[key]) groups[key] = [];
    groups[key].push(row);
});

// Create a trace for each group
Object.keys(groups).forEach(function(key) {
    var groupData = groups[key];
    traces.push({
        x: groupData.map(d => d.x),
        y: groupData.map(d => d.y),
        mode: 'markers',
        name: key,
        marker: {
            size: 4,
            opacity: 0.6
        },
        type: 'scatter'
    });
});

// Density contours
if (window.showDensity_complex_filters) {
    traces.push({
        x: data.map(d => d.x),
        y: data.map(d => d.y),
        name: 'density',
        ncontours: 20,
        colorscale: 'Hot',
        reversescale: true,
        showscale: false,
        type: 'histogram2dcontour',
        showlegend: false
    });
}

// X marginal histogram
traces.push({
    x: data.map(d => d.x),
    name: 'x density',
    marker: {color: 'rgba(128, 128, 128, 0.5)'},
    yaxis: 'y2',
    type: 'histogram',
    showlegend: false
});

// Y marginal histogram
traces.push({
    y: data.map(d => d.y),
    name: 'y density',
    marker: {color: 'rgba(128, 128, 128, 0.5)'},
    xaxis: 'x2',
    type: 'histogram',
    showlegend: false
});

        
        var layout = {
            title: 'Complex Multi-Filter Scatter Plot',
            showlegend: true,
            autosize: true,
            hovermode: 'closest',
                xaxis: {
        title: 'X Position',
        domain: [0, 0.85],
        showgrid: true,
        zeroline: true
    },
    yaxis: {
        title: 'Y Position',
        domain: [0, 0.85],
        showgrid: true,
        zeroline: true
    },
    xaxis2: {
        domain: [0.85, 1],
        showgrid: false,
        zeroline: false
    },
    yaxis2: {
        domain: [0.85, 1],
        showgrid: false,
        zeroline: false
    },

            margin: {t: 100, r: 100, b: 100, l: 100}
        };
        
        Plotly.newPlot('complex_filters', traces, layout, {responsive: true});
    }
    
        function updatePlotWithFilters_complex_filters() {
        var filteredData = window.allData_complex_filters.filter(function(row) {
                // Filter for region (categorical)
    var region_select = document.getElementById('complex_filters_region_slider');
    var region_selected = Array.from(region_select.selectedOptions).map(opt => opt.value);
    if (region_selected.length > 0 && !region_selected.includes(String(row.region))) {
        return false;
    }

                            // Filter for priority (categorical)
    var priority_select = document.getElementById('complex_filters_priority_slider');
    var priority_selected = Array.from(priority_select.selectedOptions).map(opt => opt.value);
    if (priority_selected.length > 0 && !priority_selected.includes(String(row.priority))) {
        return false;
    }

                            // Filter for timestamp (date)
    if ($("#complex_filters_timestamp_slider").data('ui-slider')) {
        var timestamp_values = $("#complex_filters_timestamp_slider").slider("values");
        var timestamp_minDate = window.dateValues_complex_filters_timestamp_slider[timestamp_values[0]];
        var timestamp_maxDate = window.dateValues_complex_filters_timestamp_slider[timestamp_values[1]];
        var timestamp_rowDate = row.timestamp;
        if (timestamp_rowDate < timestamp_minDate || timestamp_rowDate > timestamp_maxDate) {
            return false;
        }
    }

                            // Filter for value (continuous)
    if ($("#complex_filters_value_slider").data('ui-slider')) {
        var value_values = $("#complex_filters_value_slider").slider("values");
        var value_val = parseFloat(row.value);
        if (value_val < value_values[0] || value_val > value_values[1]) {
            return false;
        }
    }

            return true;
        });
        updatePlot_complex_filters(filteredData);
    }



});
</script>

<!-- DATASETS -->

<script type="text/plain" id="df2" data-format="parquet" data-src="data/df2.parquet"></script><script type="text/plain" id="stock_data" data-format="parquet" data-src="data/stock_data.parquet"></script><script type="text/plain" id="df6" data-format="parquet" data-src="data/df6.parquet"></script><script type="text/plain" id="df3" data-format="parquet" data-src="data/df3.parquet"></script><script type="text/plain" id="df4" data-format="parquet" data-src="data/df4.parquet"></script><script type="text/plain" id="df1" data-format="parquet" data-src="data/df1.parquet"></script>

<!-- ACTUAL CONTENT -->

<h1></h1>
<p></p>

<h2>Simple Scatter with Continuous Range Slider</h2>
<p>Use the range slider to filter by value</p>

<div style="margin: 20px 0;">
    <button id="simple_scatter_density_toggle" style="padding: 5px 15px; cursor: pointer;">
        Hide Density Contours
    </button>
</div>
<div style="margin: 20px 0;">
    <label>Filter by value: </label>
    <span id="simple_scatter_value_slider_label">0.15 to 99.96</span>
    <div id="simple_scatter_value_slider" style="width: 300px; margin: 10px 0;"></div>
</div>


<!-- Chart -->
<div id="simple_scatter"></div>
<br><hr><br>
<h2>Scatter with Multiple Filters</h2>
<p>Points must pass ALL filter criteria to be displayed</p>

<div style="margin: 20px 0;">
    <button id="multi_slider_density_toggle" style="padding: 5px 15px; cursor: pointer;">
        Hide Density Contours
    </button>
</div>
<div style="margin: 20px 0;">
    <label for="multi_slider_category_slider">Filter by category: </label>
    <select id="multi_slider_category_slider" multiple style="width: 300px; height: 100px;">
        <option value="A" selected>A</option>
<option value="B" selected>B</option>
<option value="C" selected>C</option>
<option value="D" selected>D</option>
    </select>
    <p style="margin: 5px 0;"><em>Hold Ctrl/Cmd to select multiple values</em></p>
</div>
<div style="margin: 20px 0;">
    <label>Filter by score: </label>
    <span id="multi_slider_score_slider_label">0.47 to 49.89</span>
    <div id="multi_slider_score_slider" style="width: 300px; margin: 10px 0;"></div>
</div>


<!-- Chart -->
<div id="multi_slider"></div>
<br><hr><br>
<h2>Weather Data with Multiple Range Sliders</h2>
<p>Filter by date range, season(s), and temperature range simultaneously</p>

<div style="margin: 20px 0;">
    <button id="weather_scatter_density_toggle" style="padding: 5px 15px; cursor: pointer;">
        Hide Density Contours
    </button>
</div>
<div style="margin: 20px 0;">
    <label>Filter by date: </label>
    <span id="weather_scatter_date_slider_label">2023-01-01 to 2023-12-31</span>
    <div id="weather_scatter_date_slider" style="width: 300px; margin: 10px 0;"></div>
</div>
<div style="margin: 20px 0;">
    <label for="weather_scatter_season_slider">Filter by season: </label>
    <select id="weather_scatter_season_slider" multiple style="width: 300px; height: 100px;">
        <option value="Fall" selected>Fall</option>
<option value="Spring" selected>Spring</option>
<option value="Summer" selected>Summer</option>
<option value="Winter" selected>Winter</option>
    </select>
    <p style="margin: 5px 0;"><em>Hold Ctrl/Cmd to select multiple values</em></p>
</div>
<div style="margin: 20px 0;">
    <label>Filter by temperature: </label>
    <span id="weather_scatter_temperature_slider_label">1.26 to 29.55</span>
    <div id="weather_scatter_temperature_slider" style="width: 300px; margin: 10px 0;"></div>
</div>


<!-- Chart -->
<div id="weather_scatter"></div>
<br><hr><br>
<h2>Simple Scatter (No Filters)</h2>
<p></p>

<div style="margin: 20px 0;">
    <button id="no_sliders_density_toggle" style="padding: 5px 15px; cursor: pointer;">
        Hide Density Contours
    </button>
</div>


<!-- Chart -->
<div id="no_sliders"></div>
<br><hr><br>
<h2>Stock Returns vs Volume with Multiple Filters</h2>
<p>Filter by date range, symbol(s), and volume range</p>

<div style="margin: 20px 0;">
    <button id="stock_scatter_density_toggle" style="padding: 5px 15px; cursor: pointer;">
        Hide Density Contours
    </button>
</div>
<div style="margin: 20px 0;">
    <label>Filter by date: </label>
    <span id="stock_scatter_date_slider_label">2024-01-01 to 2024-03-31</span>
    <div id="stock_scatter_date_slider" style="width: 300px; margin: 10px 0;"></div>
</div>
<div style="margin: 20px 0;">
    <label for="stock_scatter_symbol_slider">Filter by symbol: </label>
    <select id="stock_scatter_symbol_slider" multiple style="width: 300px; height: 100px;">
        <option value="AAPL" selected>AAPL</option>
<option value="GOOGL" selected>GOOGL</option>
<option value="MSFT" selected>MSFT</option>
    </select>
    <p style="margin: 5px 0;"><em>Hold Ctrl/Cmd to select multiple values</em></p>
</div>
<div style="margin: 20px 0;">
    <label>Filter by volume: </label>
    <span id="stock_scatter_volume_slider_label">7111.17 to 995168.52</span>
    <div id="stock_scatter_volume_slider" style="width: 300px; margin: 10px 0;"></div>
</div>


<!-- Chart -->
<div id="stock_scatter"></div>
<br><hr><br>
<h2>Complex Multi-Filter Scatter Plot</h2>
<p>Demonstrates 4 simultaneous filters: 2 categorical + 1 date range + 1 continuous range</p>

<div style="margin: 20px 0;">
    <button id="complex_filters_density_toggle" style="padding: 5px 15px; cursor: pointer;">
        Hide Density Contours
    </button>
</div>
<div style="margin: 20px 0;">
    <label for="complex_filters_region_slider">Filter by region: </label>
    <select id="complex_filters_region_slider" multiple style="width: 300px; height: 100px;">
        <option value="East" selected>East</option>
<option value="North" selected>North</option>
<option value="South" selected>South</option>
<option value="West" selected>West</option>
    </select>
    <p style="margin: 5px 0;"><em>Hold Ctrl/Cmd to select multiple values</em></p>
</div>
<div style="margin: 20px 0;">
    <label for="complex_filters_priority_slider">Filter by priority: </label>
    <select id="complex_filters_priority_slider" multiple style="width: 300px; height: 100px;">
        <option value="High" selected>High</option>
<option value="Low" selected>Low</option>
<option value="Medium" selected>Medium</option>
    </select>
    <p style="margin: 5px 0;"><em>Hold Ctrl/Cmd to select multiple values</em></p>
</div>
<div style="margin: 20px 0;">
    <label>Filter by timestamp: </label>
    <span id="complex_filters_timestamp_slider_label">2024-01-01 to 2024-12-31</span>
    <div id="complex_filters_timestamp_slider" style="width: 300px; margin: 10px 0;"></div>
</div>
<div style="margin: 20px 0;">
    <label>Filter by value: </label>
    <span id="complex_filters_value_slider_label">1.48 to 999.69</span>
    <div id="complex_filters_value_slider" style="width: 300px; margin: 10px 0;"></div>
</div>


<!-- Chart -->
<div id="complex_filters"></div>
<br><hr><br>


<hr><p align="right"><small>This page was created using <a href="https://github.com/s-baumann/JSPlots.jl">JSPlots.jl</a>.</small></p>
</body>
</html>
